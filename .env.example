# Example environment for Clawboard
# Copy to .env and fill in values.

# Shared API token:
# - required for all write endpoints
# - required for non-localhost reads (including Tailscale/custom-domain access)
# - localhost reads are allowed without token
CLAWBOARD_TOKEN=your-token-here

# Optional: database (defaults to sqlite)
# CLAWBOARD_DB_URL=postgresql+psycopg://clawboard:clawboard@db:5432/clawboard

# Public API base for the web UI.
# IMPORTANT: must be reachable from the *browser*. If you access Clawboard over
# Tailscale, set this to your tailnet IP/hostname (e.g. http://100.x.y.z:8010).
CLAWBOARD_PUBLIC_API_BASE=http://localhost:8010

# Optional: public/browser-facing UI URL (for installer summaries and docs).
CLAWBOARD_PUBLIC_WEB_URL=http://localhost:3010

# OpenClaw gateway base URL for the classifier worker (docker).
OPENCLAW_BASE_URL=http://host.docker.internal:18789
# Token from ~/.openclaw/openclaw.json -> gateway.auth.token
OPENCLAW_GATEWAY_TOKEN=your-openclaw-gateway-token

# Classifier worker cadence + retry policy
CLASSIFIER_INTERVAL_SECONDS=10
CLASSIFIER_MAX_ATTEMPTS=3

# Event stream buffer size (SSE replay)
CLAWBOARD_EVENT_BUFFER=500

# Optional: async ingest queue
# CLAWBOARD_INGEST_MODE=queue
# CLAWBOARD_QUEUE_POLL_SECONDS=1.5
# CLAWBOARD_QUEUE_BATCH=25

# Classifier context and embeddings (optional)
CLASSIFIER_WINDOW_SIZE=24
CLASSIFIER_LOOKBACK_LOGS=80
CLASSIFIER_TOPIC_SIM_THRESHOLD=0.78
CLASSIFIER_TASK_SIM_THRESHOLD=0.80
CLASSIFIER_EMBED_MODEL=BAAI/bge-small-en-v1.5

# Embeddings/search index (Qdrant is enabled by default in docker-compose)
QDRANT_URL=http://qdrant:6333
QDRANT_COLLECTION=clawboard_embeddings
QDRANT_DIM=384
# Optional: if your Qdrant uses API key auth
# QDRANT_API_KEY=

# Optional: enrich classifier with OpenClaw memory snippets
# Mount the host memory dir into the classifier container and point to the sqlite file.
# Example volume: ~/.openclaw/memory:/data/openclaw-memory:ro
OPENCLAW_MEMORY_DB_PATH=/data/openclaw-memory/main.sqlite
OPENCLAW_MEMORY_DB_FALLBACK=/data/openclaw-memory/main.sqlite
OPENCLAW_MEMORY_MAX_HITS=6

# Optional: restrict CORS
# CLAWBOARD_CORS_ORIGINS=http://localhost:3010

# Optional: trust X-Forwarded-For / X-Real-IP from your reverse proxy.
# Leave unset (default) unless you control the proxy boundary.
# CLAWBOARD_TRUST_PROXY=0
